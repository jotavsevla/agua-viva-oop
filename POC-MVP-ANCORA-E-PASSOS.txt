POC-MVP - ANCORAGEM ATUAL E PROXIMOS PASSOS
Atualizado em: 2026-02-19

Objetivo:
Provar o loop operacional completo (pedido -> rota -> inicio -> evento terminal -> replanejamento -> timeline)
com dados de verdade de Montes Claros no banco de teste.

1) O que ja esta feito nesta rodada

- Seed geografico de Montes Claros criado:
  - sql/seeds/001_seed_clientes_montes_claros_test.sql
  - 12 clientes com coordenadas plausiveis de bairros reais.
  - 4 clientes com saldo VALE inicial.
- Seed com script dedicado:
  - scripts/poc/seed-montes-claros-test.sh
- Reset operacional passou a aplicar seed automaticamente por padrao:
  - scripts/poc/reset-test-state.sh
  - controle por variavel SEED_MONTES_CLAROS=1|0
- Verificacao objetiva de seed adicionada:
  - scripts/poc/check-montes-claros-seed.sh
  - falha se contagens esperadas nao baterem.

Validacao executada nesta maquina (banco de teste):
- reset-test-state + seed aplicados com sucesso.
- clientes seedados de Montes Claros: 12
- saldos VALE seedados de Montes Claros: 4

Qualidade validada nesta rodada:
- Java (unitario + integracao): `mvn test` => 258 testes, 0 falhas, 0 erros.
- Python solver: `solver/.venv/bin/python -m pytest -q solver/tests` => 29 passed.
- UI unitario (Node): `npm run test:node` => 15 passed.
- Suite operacional canonica: `scripts/poc/run-suite.sh` => sucesso em
  `artifacts/poc/20260219-192025/summary.json`.
- Business gate strict (1 rodada): aprovado em
  `artifacts/poc/business-gate-20260219-192113/business-summary.json`
  com 27 checks em PASS e 0 FAIL.

2) O que ainda falta para fechar PoC-MVP (backlog aberto)

Prioridade alta (sequencia recomendada):
1. Cenario oficial com 1, 2 e N entregadores (capacidade igual/diferente).
2. Invariante global de entrega aberta em todos os cenarios.
3. Cancelamento/preempcao de job do solver em replanejamento (fim-a-fim).
4. Business gate strict como check obrigatorio de CI.
5. Demo guiada repetivel com playbook unico + pacote de evidencias stakeholder.
6. SLA minimo operacional (pedido->rota, rota->inicio).

3) Roteiro de execucao para "ver acontecendo"

Passo A - Subir ambiente de teste:
  scripts/poc/start-test-env.sh

Passo B - Resetar estado e garantir massa de Montes Claros:
  scripts/poc/reset-test-state.sh
  scripts/poc/check-montes-claros-seed.sh

Passo C - Rodar cenarios canonicos:
  scripts/poc/run-cenario.sh feliz
  scripts/poc/run-cenario.sh falha
  scripts/poc/run-cenario.sh cancelamento

Passo D - Rodar gate de negocio:
  scripts/poc/run-business-gate.sh --mode strict --rounds 1
  scripts/poc/run-business-gate.sh --mode strict --rounds 3

Passo E - Consolidar evidencias:
  artifacts/poc/business-gate-<timestamp>/business-summary.json

4) Definicao de pronto para PoC-MVP (criterio binario)

- 3 rodadas strict consecutivas sem intermitencia.
- Cenarios feliz/falha/cancelamento verdes com estados finais corretos.
- Cenarios 1, 2 e N entregadores validados com capacidade respeitada.
- Invariantes de entrega aberta e ownership sem violacoes.
- Demo guiada de 15 min reproduzivel com evidencias versionadas.
